---
title: LINUX-系统监控
tags: [linux]
sitemap:
    lastmod: 2015-10-24T12:49:30-05:00
---

[TOC]






相关工具
=====================================================================

*  Applications->System Tools->System Monitor
*  Applications->Utilities->Disk Usage Analyzer
*  top
*  ps
*  df
*  du
*  sysstat软件包
 *   iostat
      iostat -x sda 1 5
 *   sar
      Disks
        sar -d 1 5
      CPU
        sar -u 1 5
      Swap
        sar -W 1 5
      Network
        sar -n DEV 1 5
*  aide
    入侵检测工具
    对文件可以做完整性检查
    安装包
      yum -y install aide
    按照你的要求要定义/etc/aide.conf配置文件
    运行/usr/sbin/aide --init来生成初始化的数据库
    复制数据库文件
    运行/usr/sbin/aide -C对系统进行入侵分析
*  vmstat






观察和管理进程
=====================================================================

概述
------------------------------------------

*  命令后加“&”会在后台运行
*  使用ctrl-z挂起前台活动的作业
*  使用jobs显示后台的或者挂起的作业
*  让挂起的程序继续运行
 *   前台
      fg %活动号
 *   后台
      bg %活动号
*  exit状态
 *   0表示成功，1-255表示失败
 *   exit <状态号>
      终止并设置指定的exit状态号
 *   使用echo $?获取系统上一次应用的exit状态
*  条件执行操作
 *   &&
      前者运行成功才执行后者
 *   ||
      前者执行失败才执行后者

ps：查看进程信息
------------------------------------------

###    进程对文件取决于文件的

*      UID
*      GID
*      SELinux上下文件


###    选项：默认显示当前终端进程

*      a
        包括所有终端的进程
        包含非当前用户的进程
*      x
        包括不属于终端的进程，即后台服务
*      u
        打印进程所有者信息
*      f
        打印进程亲缘信息
*      o property1,property2...
        输出结果内容
        打印定制信息
*      --sort
        输出结果排序


###    示例

      ps axo pid,%cpu,comm,nice --sort=%cpu



pgrep：查找进程
------------------------------------------

*      -U
        匹配用户
*      -G
        匹配组



pidof：通过程序名查找进程
------------------------------------------

    pidof bash



kill：
------------------------------------------

###    信号

*      1
        重新读取配置文件
*      9
        强制终止
*      15
        整洁终止
*      19
        继续运行
*      man 7 signal 显示完整列表
*      18
        继续


###    相关命令

*      killall [signal] 程序名称
*      pkill [-signal] 程序名模式



nice：
------------------------------------------

*    进程启动之前确定其优先级



renice：
------------------------------------------

*    更改进程的优先级
*    数字越低优先级越高
*    只有root用户才能提高进程优先级

gnome-system-monitor
------------------------------------------

top
------------------------------------------

test
------------------------------------------

###    速记符号为[ 条件表达式 ]

      [ "$A" -eq "$B" ] && echo "Strings are equal."


###    文件测试

*      -f
        指定文件是否存在
*      -d
        指定目录是否存在
*      -x
        指定文件是否可执行
*      例
        [ -f ~/lib/functions ] && source ~/lib/functions






网络监控工具
=====================================================================

wireshark
------------------------------------------



tcpdump：能用来捕获网络流量
------------------------------------------

    
###    选项

*      -nn
        端口和协议都显示
*      -w
        指定输出到的文件名
*      -r
        解析捕获的文件


###    例

      tcpdump -nn -w ${file}



netstat：用于检查本地服务
------------------------------------------

    
###    选项

*      -t
        tcp
*      -u
        udp
*      -l
        仅显示监听的端口
*      -n
        显示主机的IP，而不是主机名
*      -p
        显示哪个进程所控制的端口


###    例

      netstat -tulnp



nmap：用于探测远程主机的服务
------------------------------------------

    
###    选项

*      -sP
        不扫描端口，仅ping
*      -sT
        基于TCP连接的扫描
*      -sU
        基于UDP连接的扫描
*      p
        指定端口范围


###    例

*      nmap -sT ${remote_host_name}
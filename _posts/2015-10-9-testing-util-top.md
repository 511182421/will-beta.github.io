---
title: 性能测试工具之top
categories: [测试]
tags: [linux]
sitemap:
    lastmod: 2015-10-9T12:49:30-05:00
---




概述
================================================================================

* 监控每一个进程的资源占用。
* 界面刚好占一个窗口大小。






界面解析
================================================================================

top：系统运行统计
------------------------------------------------------

up：系统运行时间，格式为时:分
user：当前登录用户数
load average：系统负载，即任务队列的平均长度。 三个数值分别为  1分钟、5分钟、15分钟前到现在的平均值。



Tasks：进程统计
------------------------------------------------------
running：正在运行的进程数
sleeping：睡眠的进程数
stopped：停止的进程数
zombie：僵尸进程数



Cpu：CPU统计
------------------------------------------------------

%us：用户空间占用CPU百分比
%sy：内核空间占用CPU百分比
%ni：用户进程空间内改变过优先级的进程占用CPU百分比
%id：空闲CPU百分比
%wa：等待输入输出的CPU时间百分比
%hi：硬中断
%si：软中断



Mem：内存统计
------------------------------------------------------

used：使用的物理内存总量
free：空闲内存总量
buffers：用作内核缓存的内存量



Swap：交换空间统计
------------------------------------------------------

used：使用的交换区总量
free：空闲交换区总量
cached：缓冲的交换区总量



各进程的资源占用情况
------------------------------------------------------

PID：进程id
PPID：父进程id
RUSER：Real user name
UID：进程所有者的用户id
USER：进程所有者的用户名
GROUP：进程所有者的组名
TTY：启动进程的终端名。不是从终端启动的进程则显示为 ?
PR：优先级
NI：nice值。负值表示高优先级，正值表示低优先级
P：最后使用的CPU，仅在多CPU环境下有意义
%CPU：上次更新到现在的CPU时间占用百分比
TIME：进程使用的CPU时间总计，单位秒
TIME+：进程使用的CPU时间总计，单位1/100秒
%MEM：进程使用的物理内存百分比
VIRT：进程使用的虚拟内存总量，单位kb。VIRT=SWAP+RES
SWAP：进程使用的虚拟内存中，被换出的大小，单位kb。
RES：进程使用的、未被换出的物理内存大小，单位kb。RES=CODE+DATA
CODE：可执行代码占用的物理内存大小，单位kb
DATA：可执行代码以外的部分(数据段+栈)占用的物理内存大小，单位kb
SHR：共享内存大小，单位kb
nFLT：页面错误次数
nDRT：最后一次写入到现在，被修改过的页面数。
S：进程状态。D=不可中断的睡眠状态；R=运行；S=睡眠；T=跟踪/停止；Z=僵尸进程
COMMAND：命令名/命令行






按键h进入帮助界面
================================================================================

* 进入各类帮助界面的按键列表（如按f进入字段排序）。
* 按q或ESC键退出






例：按键f进入排序设置界面
================================================================================

* 显示当前用于排序的列。
* 显示可用于排序的列。
* 通过方向键选择用于排序的列后，按s确定后，再按ESC退出设置界面。






top -ab -n 1
===========================================

* -b参数表示获取所有进程的资源占用。
* -n参数表示只获取一次。






其它工具
================================================================================

nmon
------------------------------------------------------

* 比top提供了更多的监控数据
* 安装：yum install nmon
* 按h键进入帮助界面

nagios
------------------------------------------------------

* 开源的免费网络监视工具
* 能有效地监控window,linux,unix的主机状态，还有交换机路由器等网络设置，打印机等
* 在系统和服务异常时发出邮件或短信报警，第一时间通知网络运维人员，并在状态恢复后发出正常的邮件或短信通知
* 一般用于管理多个设备